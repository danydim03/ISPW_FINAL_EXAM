<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>



<AnchorPane minHeight="550.0" minWidth="750.0"
            prefHeight="600.0" prefWidth="900.0"
            stylesheets="@styles/crea-ordine-style.css"
            styleClass="background"
            xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.example.use_cases.crea_ordine.graphic_controllers.CreaOrdineGUIController">

    <!-- Intestazione -->
    <VBox AnchorPane.topAnchor="10" AnchorPane.leftAnchor="20" AnchorPane.rightAnchor="20">
        <HBox alignment="CENTER_LEFT" spacing="15">
            <ImageView fitHeight="40" fitWidth="40" preserveRatio="true">
                <Image url="@images/kebab1.png"/>
            </ImageView>
            <VBox>
                <Label fx:id="labelNumeroOrdine" text="Nuovo Ordine" styleClass="page-title"/>
                <Text text="Componi il tuo ordine perfetto" styleClass="page-subtitle"/>
            </VBox>
        </HBox>
    </VBox>

    <!-- Layout principale a 2 colonne -->
    <HBox AnchorPane.topAnchor="70" AnchorPane.bottomAnchor="20"
          AnchorPane.leftAnchor="20" AnchorPane.rightAnchor="20" spacing="20">

        <!-- ==================== COLONNA SINISTRA ==================== -->
        <VBox prefWidth="400" spacing="15" styleClass="card-container">

            <!-- Card: Seleziona Prodotto Base -->
            <AnchorPane styleClass="card" prefHeight="190">
                <ImageView fitHeight="80" fitWidth="400" preserveRatio="false"
                           AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0">
                    <Image url="@images/habibi_banner.png"/>
                </ImageView>

                <VBox AnchorPane.topAnchor="85" AnchorPane.leftAnchor="15"
                      AnchorPane.rightAnchor="15" AnchorPane.bottomAnchor="10" spacing="10">
                    <Label text="ðŸ¥™ Scegli il Prodotto Base" styleClass="card-title"/>

                    <VBox spacing="6">
                        <RadioButton fx:id="radioPanino" text="Panino Doner Kebab (â‚¬5.50, 5 min)" styleClass="base-radio"/>
                        <RadioButton fx:id="radioPiadina" text="Piadina Doner Kebab (â‚¬6.00, 6 min)" styleClass="base-radio"/>
                        <RadioButton fx:id="radioPiatto" text="Kebab al Piatto (â‚¬8.00, 8 min)" styleClass="base-radio"/>
                    </VBox>

                </VBox>
            </AnchorPane>

            <!-- Card: Seleziona Add-On -->
            <AnchorPane styleClass="card" prefHeight="200">
                <VBox AnchorPane.topAnchor="15" AnchorPane.leftAnchor="15"
                      AnchorPane.rightAnchor="15" AnchorPane.bottomAnchor="15" spacing="12">
                    <Label text="ðŸ§… Aggiungi Extra" styleClass="card-title"/>
                    <Text text="Personalizza il tuo ordine con gli add-on" styleClass="card-description"/>

                    <GridPane hgap="15" vgap="10">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="50"/>
                            <ColumnConstraints percentWidth="50"/>
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints/>
                            <RowConstraints/>
                        </rowConstraints>

                        <CheckBox fx:id="checkCipolla" text="ðŸ§… Cipolla (+â‚¬0.50)" styleClass="addon-checkbox"
                                  GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                        <CheckBox fx:id="checkSalsaYogurt" text="ðŸ¥› Salsa Yogurt (+â‚¬0.80)" styleClass="addon-checkbox"
                                  GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                        <CheckBox fx:id="checkPatatine" text="ðŸŸ Patatine (+â‚¬2.00)" styleClass="addon-checkbox"
                                  GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <CheckBox fx:id="checkMixVerdure" text="ðŸ¥— Mix Verdure (+â‚¬1.50)" styleClass="addon-checkbox"
                                  GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                    </GridPane>

                    <Button fx:id="btnAggiungiProdotto" text="Aggiungi all'Ordine" onAction="#onAggiungiProdotto"
                            styleClass="primary-button" maxWidth="Infinity"/>
                </VBox>
            </AnchorPane>

            <!-- Card: Voucher -->
            <AnchorPane styleClass="card" prefHeight="120">
                <VBox AnchorPane.topAnchor="10" AnchorPane.leftAnchor="15"
                      AnchorPane.rightAnchor="15" AnchorPane.bottomAnchor="10" spacing="10">
                    <Label text="ðŸ§¾ Hai un Voucher?" styleClass="card-title"/>
                    <HBox spacing="10">
                        <TextField fx:id="textFieldVoucher" promptText="Inserisci codice voucher..." HBox.hgrow="ALWAYS"/>
                        <Button fx:id="btnApplicaVoucher" text="Applica" onAction="#onApplicaVoucher" styleClass="primary-button" disable="true"/>
                        <Button fx:id="btnRimuoviVoucher" text="âœ•" onAction="#onRimuoviVoucher" styleClass="danger-button" disable="true"/>
                    </HBox>
                </VBox>
            </AnchorPane>
        </VBox>

        <!-- ==================== COLONNA DESTRA ==================== -->
        <VBox spacing="10" styleClass="card-container" prefWidth="430">
            <AnchorPane styleClass="card" prefHeight="370">
                <VBox AnchorPane.topAnchor="10" AnchorPane.leftAnchor="15"
                      AnchorPane.rightAnchor="15" AnchorPane.bottomAnchor="10" spacing="10">
                    <HBox alignment="CENTER_LEFT">
                        <Label text="ðŸ“‹ Il Tuo Ordine" styleClass="card-title"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button fx:id="btnRimuoviProdotto" text="Rimuovi" onAction="#onRimuoviProdotto"
                                styleClass="danger-outline-button" disable="true"/>
                    </HBox>

                    <TableView fx:id="tabellaOrdine" prefHeight="260">
                        <columns>
                            <TableColumn fx:id="colonnaDescrizione" text="Prodotto" prefWidth="200"/>
                            <TableColumn fx:id="colonnaPrezzo" text="Prezzo" prefWidth="90"/>
                            <TableColumn fx:id="colonnaDurata" text="Tempo" prefWidth="80"/>
                        </columns>
                    </TableView>

                    <VBox spacing="4">
                        <HBox>
                            <Label text="Subtotale:" styleClass="label-subtotale"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Label fx:id="labelSubtotale" text="â‚¬0.00" styleClass="label-importo"/>
                        </HBox>
                        <HBox fx:id="panelSconto" visible="false" managed="false">
                            <Label text="Sconto:"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Label fx:id="labelSconto" text="â‚¬0.00" styleClass="label-sconto"/>
                        </HBox>
                        <HBox>
                            <Label text="TOTALE:" styleClass="label-totale"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Label fx:id="labelTotale" text="â‚¬0.00" styleClass="label-totale-importo"/>
                        </HBox>
                        <HBox>
                            <Label text="â± Tempo stimato:"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Label fx:id="labelDurata" text="0 min"/>
                        </HBox>
                        <Label fx:id="labelVoucherInfo" text="" styleClass="label-voucher-info"/>
                    </VBox>
                </VBox>
            </AnchorPane>

            <HBox spacing="10">
                <Button fx:id="btnAnnullaOrdine" text="Annulla Ordine" onAction="#onAnnullaOrdine"
                        styleClass="danger-outline-button" HBox.hgrow="ALWAYS"/>
                <Button fx:id="btnConfermaOrdine" text="Conferma Ordine" onAction="#onConfermaOrdine"
                        styleClass="success-button" HBox.hgrow="ALWAYS"/>
            </HBox>
        </VBox>
    </HBox>
</AnchorPane>